<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Test</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">
    <nav aria-label="Section navigation">
      <div class="brand">Your Company</div>
      <ul class="menu">
        <li><a href="#home" data-section="home" aria-current="page">Home <small>Welcome</small></a></li>
        <li><a href="#about" data-section="about">About <small>Who we are</small></a></li>
        <li><a href="#services" data-section="services">Services <small>What we do</small></a></li>
        <li><a href="#portfolio" data-section="portfolio">Portfolio <small>Recent work</small></a></li>
        <li><a href="#contact" data-section="contact">Contact <small>Get in touch</small></a></li>
        <!-- External page example -->
        <li><a href="#test" data-external="/pages/test.html">Test Page <small>separate file</small></a></li>
      </ul>

      <div class="footer">
        Â© <span id="year"></span> Your Company
      </div>
    </nav>

    <main id="content" tabindex="-1" aria-live="polite" aria-atomic="true"></main>
  </div>

  <script>
    // --- Simple router ---
    const sections = {
      home: `
        <h1 class="heading">Welcome</h1>
        <p class="sub">A clean, eye-friendly layout with a compact sidebar on the left and your content on the right.</p>
        <div class="card"><p>Use the links on the left to switch sections. This setup keeps the code simple and the look professional.</p></div>
      `,
      about: `
        <h1 class="heading">About Us</h1>
        <p class="sub">We build reliable products with a focus on clarity and performance.</p>
        <div class="card"><p>Add your company story, team bios, and values here.</p></div>
      `,
      services: `
        <h1 class="heading">Services</h1>
        <p class="sub">What we can do for you.</p>
        <div class="card">
          <ul>
            <li>Consulting & Strategy</li>
            <li>Design & Prototyping</li>
            <li>Web & App Development</li>
            <li>Support & Maintenance</li>
          </ul>
        </div>
      `,
      portfolio: `
        <h1 class="heading">Portfolio</h1>
        <p class="sub">A few highlights from recent projects.</p>
        <div class="card"><p>Replace this with screenshots, case studies, or links.</p></div>
      `,
      contact: `
        <h1 class="heading">Contact</h1>
        <p class="sub">We'd love to hear from you.</p>
        <div class="card"><p>Email: <a href="mailto:hello@example.com">hello@example.com</a><br/>Phone: (000) 000-0000</p></div>
      `,
    };

  const content = document.getElementById('content');
  const navLinks = [...document.querySelectorAll('nav a')];

  function setActive(by) {
    navLinks.forEach(a => a.setAttribute('aria-current', a === by ? 'page' : 'false'));
  }

  async function renderExternal(url) {
    try {
      // Use relative URLs so it works on GitHub Pages project paths.
      const res = await fetch(url, { cache: 'no-cache' });
      let html = await res.text();

      // If someone accidentally made test.html a full document, extract the <body>.
      if (/<html[^>]*>/i.test(html)) {
        const doc = new DOMParser().parseFromString(html, 'text/html');
        html = (doc.querySelector('main')?.innerHTML) || doc.body.innerHTML || 'Loaded.';
      }

      content.innerHTML = html;              // inject ONLY inner markup
      content.focus({ preventScroll: true }); // keep accessibility nice
    } catch (e) {
      content.innerHTML = `<div class="card"><p>Could not load <code>${url}</code>.</p></div>`;
    }
  }

  // Clicks (no page reload)
  navLinks.forEach(a => a.addEventListener('click', e => {
    const external = a.dataset.external;
    if (external) {
      e.preventDefault();
      history.replaceState(null, '', '#test');
      renderExternal(external);
      setActive(a);
    }
  }));

  // Hash support on refresh/back
  function loadFromHash() {
    const hash = (location.hash || '#home').slice(1);
    if (hash === 'test') {
      const link = navLinks.find(a => a.dataset.external);
      if (link) { setActive(link); renderExternal(link.dataset.external); return; }
    }
    // ...your existing internal section handling here...
  }
  window.addEventListener('hashchange', loadFromHash);
  loadFromHash();
  </script>
</body>
</html>

